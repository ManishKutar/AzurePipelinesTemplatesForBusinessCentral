parameters:
  taskName: CloneGitRepository
  url: ''
  folder: ''

steps:
- powershell: |
    Set-StrictMode -Version Latest
    
    if (-not (Test-Path -LiteralPath env:GIT_CLONE_FOLDER)) {
      throw "Git clone folder is not set."
    }
   
    Write-Host -Object ("git clone $env:GIT_CLONE_URL $env:GIT_CLONE_FOLDER".ToUpper())
    git clone --porcelain $env:GIT_CLONE_URL $env:GIT_CLONE_FOLDER
  errorActionPreference: Continue
  failOnStderr: false
  ignoreLASTEXITCODE: true
  env:
    TaskName: ${{ parameters.taskName }}
    GIT_CLONE_URL: ${{ parameters.url }}
    GIT_CLONE_FOLDER: ${{ parameters.folder }}
  displayName: Clone Git Repository ${{ parameters.url }}
